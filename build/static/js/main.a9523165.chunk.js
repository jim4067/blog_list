(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{47:function(e,t,n){e.exports=n(77)},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var r,a=n(0),o=n.n(a),c=n(21),u=n.n(c),i=n(7),l=n(13),s=n(1),p=n.n(s),d=n(6),f=n(18),m=n(5),v=n(2),b=n(3),g=n(28),x=n(23),h=n(14),E=n.n(h),O=null,w={setToken:function(e){O="bearer ".concat(e)},getAll:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/blogs");case 2:return t=e.sent,console.log(t.data),e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,E.a.post("/api/blogs",t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(p.a.mark((function e(t,n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{Authorization:O}},e.next=3,E.a.put("".concat("/api/blogs","/").concat(t),n,r);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),remove:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,E.a.delete("".concat("/api/blogs","/").concat(t),n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return e.sort((function(e,t){return t.likes-e.likes}))},y=function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){var r,a,o,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.getAll();case 2:return r=t.sent,a=r.find((function(t){return t.id===e})),o=Object(g.a)(Object(g.a)({},a),{},{likes:a.likes+1}),t.next=7,w.update(e,o);case 7:c=t.sent,n({type:"VOTE",updatedBlog:c});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT BLOGS":return j(t.data);case"NEW BLOG":return[].concat(Object(x.a)(e),[t.data]);case"VOTE":var n=t.updatedBlog,r=e.map((function(e){return e.id===n.id?n:e}));return j(r);case"REMOVE":return j(t.data);default:return e}},N=function(e,t){return function(){var n=Object(d.a)(p.a.mark((function n(a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"SET NOTIFICATION",data:e}),setTimeout((function(){r&&clearTimeout(r),r=setTimeout((function(){a(I())}),t)}),1e3*t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},I=function(){return{type:"CLEAR NOTIFICATION",data:null}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET NOTIFICATION":case"CLEAR NOTIFICATION":return t.data;default:return e}};function T(){var e=Object(v.a)(["\n\t:hover {\n\t\t//background-color: palevioletred;\n\t\tborder: palevioletred;\n\t}\n"]);return T=function(){return e},e}function A(){var e=Object(v.a)(["\n\tbackground-color: inherit;\n\tborder: 1px solid palevioletred;\n\tborder-radius: 3px;\n\tbox-shadow: 0 5px 15px -5px #00000070;\n\tcolor: palevioletred;\n\tfont-size: 1em;\n\tmargin: 1em 0px;\n\toutline: none;\n\tpadding: 0.25em 2em;\n\ttext-align: center;\n\ttransition: 0.2s linear;\n\n\t:hover {\n\t\t// background-color: red;\n\t\tborder: none;\n\t\tcolor: white;\n\t\tcursor: pointer;\n\t\t//transform: scale(1.1);\n\t}\n"]);return A=function(){return e},e}function L(){var e=Object(v.a)(["\n\tbackground: papayawhip;\n\tborder: none;\n\tborder-radius: 3px;\n\tcolor: palevioletred;\n\tmargin: 0.5em;\n\toutline: none;\n\tpadding: 0.5em;\n\ttext-align: center;\n"]);return L=function(){return e},e}function C(){var e=Object(v.a)(["\n\tdisplay: ",";\n"]);return C=function(){return e},e}function R(){var e=Object(v.a)(["\n\ttext-align: center;\n"]);return R=function(){return e},e}var U=b.a.div(R()),B=b.a.div(C(),(function(e){return e.invisible?"none":""})),z=b.a.input(L()),G=b.a.button(A()),F=Object(b.a)(G)(T()),J=function(){var e=Object(i.b)(),t=Object(a.useState)(!0),n=Object(f.a)(t,2),r=n[0],c=n[1];return o.a.createElement(U,null,o.a.createElement(B,{invisible:r},o.a.createElement("h2",null,"CreateNew"),o.a.createElement("form",{onSubmit:function(t){t.preventDefault();var n=t.target.title.value;t.target.title.value="";var r=t.target.author.value;t.target.author.value="";var a=t.target.url.value;t.target.url.value="";var o={title:n,author:r,url:a};e(function(e){return function(){var t=Object(d.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.create(e);case 2:r=t.sent,n({type:"NEW BLOG",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(o)),e(N("a new blog -> ".concat(o.title," by ").concat(o.author," added"),5))}},o.a.createElement("div",null,o.a.createElement(z,{placeholder:"title",type:"text",name:"title"})),o.a.createElement("div",null,o.a.createElement(z,{placeholder:"author",type:"text",name:"author"})),o.a.createElement("div",null,o.a.createElement(z,{placeholder:"url",type:"text",name:"url"})),o.a.createElement(F,{type:"submit"}," save "))),o.a.createElement(G,{type:"button",onClick:function(){c(!r)}}," ",r?"create new":"cancel"," "))};function V(){var e=Object(v.a)(["\n\tbackground-color: inherit;\n\tborder: 1px solid red;\n\tbox-shadow: 0 5px 15px -5px #00000070;\n\tcolor: black;\n\t//height: 23px;\n\tmargin: 10px 0px 5px 0px;\n\n\t:hover {\n\t\tbackground-color: red;\n\t\tcolor:  papayawhip;\n\t}\n"]);return V=function(){return e},e}function W(){var e=Object(v.a)(["\n\tbackground-color: inherit;\t\n\tborder: 1px solid palevioletred;\n\tcolor: palevioletred;\n\tmargin: 0px 30px;\n\toutline: none;\t\n\ttext-align: center;\n\ttransition: 0.2s linear;\n\twidth: 60px;\n\n\t:hover {\n\t\tcolor: papayawhip;\n\t\tcursor: pointer;\n\t\ttransform: scale(1.1);\n\t}\n"]);return W=function(){return e},e}function q(){var e=Object(v.a)(["\n\tcolor: black;\n\ttext-decoration: none;\n\ttransition: 0.2s linear;\n\n\t:hover {\n\t\tcursor: pointer;\n\t\tcolor: palevioletred;\n\t}\n"]);return q=function(){return e},e}var D=Object(b.a)(l.b)(q()),M=b.a.button(W()),P=Object(b.a)(M)(V()),H=function(e){var t=e.blog,n=e.increaseLikesOf,r=e.handleRemOf,c=Object(a.useState)(!0),u=Object(f.a)(c,2),i=u[0],l=u[1],s={display:i?"none":""};return o.a.createElement("div",{style:{border:".3px solid",margin:"3px",padding:"4px"}},o.a.createElement(D,{to:"/blogs/".concat(t.id)},t.title," ",t.author),o.a.createElement(M,{onClick:function(){l(!i)},className:"viewButton"}," ",i?"view":"hide"," "),o.a.createElement("div",{style:s,className:"hidden-div"},t.url,o.a.createElement("br",null),"likes: ",t.likes,o.a.createElement(M,{onClick:n}," like ")," ",o.a.createElement("br",null),t.author,o.a.createElement("br",null),o.a.createElement(P,{onClick:r}," remove ")))};function K(){var e=Object(v.a)(["\n\tmargin: 20px 0px;\n\ttext-align: center;\n"]);return K=function(){return e},e}function Q(){var e=Object(v.a)(["\n// color: white;\n"]);return Q=function(){return e},e}var X=b.a.div(Q()),Y=b.a.h2(K()),Z=function(e){var t=Object(i.c)((function(e){return e.blogs})),n=Object(i.b)(),r=function(e){var t;window.confirm("remove blog ".concat(e.title," by ").concat(e.author))&&n((t=e.id,function(){var e=Object(d.a)(p.a.mark((function e(n){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.remove(t);case 2:return e.next=4,w.getAll();case 4:r=e.sent,a=r.filter((function(e){return e.id!==t})),n({type:"REMOVE",data:a});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return o.a.createElement(X,null,o.a.createElement(Y,{className:"blog-title"},"Blogs"),t.map((function(e){return o.a.createElement(H,{key:e.id,blog:e,increaseLikesOf:function(){return n(y(e.id))},handleRemOf:function(){return r(e)}})})),e.children)};function $(){var e=Object(v.a)(["\n    color: black;\n\ttext-decoration: none;\n\ttransition: 0.2s linear;\n\n\t:hover {\n        cursor: pointer;\n        color: palevioletred;\n\t}\n"]);return $=function(){return e},e}var _=Object(b.a)(l.b)($()),ee=function(e){var t=e.users;return o.a.createElement("div",null,o.a.createElement("section",{style:{padding:"10px 20px"}},o.a.createElement("span",null," ",o.a.createElement(_,{to:"/users/".concat(t.id)}," ",t.name,"  has created ",t.blogs.length," blogs ")),o.a.createElement("hr",{style:{borderColor:"aqua"}})))};function te(){var e=Object(v.a)(["\n\tmargin: 20px 0px;\n\ttext-align: center;\n"]);return te=function(){return e},e}var ne=b.a.h2(te()),re=function(){var e=Object(i.c)((function(e){return e.users}));return null===e?null:o.a.createElement("div",null,o.a.createElement(ne,null,"Users"),e.map((function(e){return o.a.createElement(ee,{key:e.id,users:e})})))},ae=(n(74),function(e){var t=e.handleLogin,n=e.username,r=e.setUsername,a=e.password,c=e.setPassword;return o.a.createElement("div",{className:"form-container"},o.a.createElement("form",{className:"login-form",onSubmit:t},o.a.createElement("h2",null,"LOGIN"),o.a.createElement("div",null,o.a.createElement("input",{placeholder:"Username",id:"username",type:"text",name:"username",value:n,onChange:function(e){var t=e.target;return r(t.value)}})),o.a.createElement("div",null,o.a.createElement("input",{placeholder:"Password",id:"password",type:"password",name:"password",value:a,onChange:function(e){var t=e.target;return c(t.value)}})),o.a.createElement("button",{type:"submit",id:"login-button"},"login")))});function oe(){var e=Object(v.a)(["\n    background-color: black;\n    border: 1px solid red;\n    box-shadow: 0 5px 15px -5px #00000070;\n    border-radius: 3px;\n    color: red;\n    height: 35px;\n\tmargin: 0px 34px 0px 20px;\n\t//outline: none;\n\tpadding: 0px 10px;\n    transition: 0.2s linear;\n    width: 70px;\n\n\t:hover {\n        background-color: red;\n\t\tcolor: #f1f1f1;\n        cursor: pointer;\n        transform: scale(1.1);\n    }\n\n    @media (max-width: 670px){\n        margin-top: 20px;\n    }\n"]);return oe=function(){return e},e}function ce(){var e=Object(v.a)(["\n\ttext-decoration: none;\n    color: white;\n    margin-left: 30px;\n    padding: 0px 10px;\n    transition: .2s linear;\n    \n    :hover{\n        color: #3498db;\n    }\n"]);return ce=function(){return e},e}function ue(){var e=Object(v.a)(["\n\n\t@media  (max-width: 980px){\n        padding: 15px 0px;\n       text-align: center;\n    }\n"]);return ue=function(){return e},e}function ie(){var e=Object(v.a)(["\n\tdisplay: flex;\n\tjustify-content: space-around;\n    padding: 5px 20px;\n"]);return ie=function(){return e},e}function le(){var e=Object(v.a)(["\n    background-color: black;\n    box-shadow: 0 5px 15px -5px #00000070;\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\tpadding: 2vh 0px;\n    top: 0;\n\n    @media (max-width: 980px){\n        font-size: 18px;\n        display: flex;\n        flex-direction: column;\n        margin: auto;\n    }\n"]);return le=function(){return e},e}var se=b.a.nav(le()),pe=b.a.section(ie()),de=b.a.section(ue()),fe=Object(b.a)(l.b)(ce()),me=b.a.button(oe()),ve=function(e){var t=e.user,n=e.handleLogout;return o.a.createElement("div",null,o.a.createElement(se,null,o.a.createElement(pe,null,o.a.createElement(fe,{to:"/users"}," users"),o.a.createElement(fe,{to:"/blogs"},"blogs")),o.a.createElement(de,null,"logged in as ".concat(t.name),o.a.createElement(me,{onClick:n},"logout"))))},be={border:"3px solid red","border-radius":"3px",color:"red","font-size":"20px","margin-top":"10px",padding:"10px","text-align":"center"},ge={border:"3px solid green","border-radius":"3px",color:"green","font-size":"20px","margin-top":"10px",padding:"10px","text-align":"center"},xe=function(){var e=Object(i.c)((function(e){return e.notification}));return null===e?null:"wrong username or password"===e?o.a.createElement("div",{className:"error",style:be},e):e.includes("a new blog")?o.a.createElement("div",{style:ge},e):e.includes("could not connect to the server")?o.a.createElement("div",{className:"error",style:be},e):void 0};function he(){var e=Object(v.a)(["\n    background-color: papayawhip;\n    border: none;\n    height: 25px;\n    margin: 0px 20px;\n\toutline: none;    \n    transition: .2s linear;\n    width: 60px;\n\n\t:hover{\n\t\tcolor: palevioletred;\n\t\tcursor: pointer;\n\t\ttransform: scale(1.1);\n\t}\n"]);return he=function(){return e},e}function Ee(){var e=Object(v.a)(["\n\tpadding: 0px 0px 0px 30px;\n"]);return Ee=function(){return e},e}function Oe(){var e=Object(v.a)(["\n\tcolor: papayawhip;\n\tpadding: 0px 0px 0px 30px;\n\ttext-decoration: none;\n\n\t:hover {\n\t\tcursor: pointer;\n\t\tcolor: palevioletred;\n\t}\n"]);return Oe=function(){return e},e}function we(){var e=Object(v.a)(["\n\tmargin: 20px 0px;\n\tpadding: 0px 0px 0px 30px;\n"]);return we=function(){return e},e}function je(){var e=Object(v.a)(["\n\tborder: 0.3px solid;\n\tline-height: 30px;\n\tmargin: 3px;\n\tpadding: 4px;\n"]);return je=function(){return e},e}var ye=b.a.div(je()),ke=b.a.h2(we()),Ne=b.a.a(Oe()),Ie=b.a.p(Ee()),Se=b.a.button(he()),Te=function(){var e=Object(i.c)((function(e){return e.blogs})),t=Object(i.b)(),n=Object(m.f)("/blogs/:id"),r=n?e.find((function(e){return e.id===n.params.id})):null;console.log("here is what the single blog contains...",r);return r?o.a.createElement(ye,null,o.a.createElement(ke,null,r.title),o.a.createElement(Ne,{title:"visit blog ".concat(r.title),href:"".concat(r.url)}," ",r.url),o.a.createElement(Ie,null,"likes ",r.likes," ",o.a.createElement(Se,{onClick:function(){return e=r.id,void t(y(e));var e}}," like ")," "),o.a.createElement(Ie,null,"added by ",r.user?r.user.name:"N/A")):null};function Ae(){var e=Object(v.a)(["\nlist-style-type: none;\npadding: 10px 0px;\n"]);return Ae=function(){return e},e}function Le(){var e=Object(v.a)(["\ntext-align: center;\npadding: 10px 16px;\n"]);return Le=function(){return e},e}var Ce=b.a.h2(Le()),Re=b.a.li(Ae()),Ue=function(){var e=Object(i.c)((function(e){return e.users})),t=Object(m.f)("/users/:id"),n=t?e.find((function(e){return e.id===t.params.id})):null;return n?o.a.createElement("div",null,o.a.createElement(Ce,null,n.name),n.blogs.map((function(e){return o.a.createElement("ul",{key:e.id,style:{textAlign:"center"}},o.a.createElement(Re,null," ",e.title,"  "),o.a.createElement("hr",null))}))):null},Be=function(e){return{type:"INIT USER",data:e}},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT USER":return t.data;default:return e}},Ge={getUsers:function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.get("/api/users");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ALL USERS":return t.data;case"NEW USER":return[].concat(Object(x.a)(e),[t.data]);default:return e}},Je={login:function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ve=(n(75),function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})),n=Object(a.useState)(""),r=Object(f.a)(n,2),c=r[0],u=r[1],l=Object(a.useState)(""),s=Object(f.a)(l,2),v=s[0],b=s[1];Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:n=e.sent,t({type:"INIT BLOGS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(a.useEffect)((function(){e(function(){var e=Object(d.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge.getUsers();case 2:n=e.sent,t({type:"ALL USERS",data:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogAppUser");if(t){var n=JSON.parse(t);e(Be(n)),w.setToken(n.token)}}),[e]);var g=function(){var t=Object(d.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),console.log("logging in with",c,v),t.prev=2,t.next=5,Je.login({username:c,password:v});case 5:r=t.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(r)),u(""),b(""),e(Be(r)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(2),console.log("the exception when logging in ...",t.t0.name,t.t0.message),t.t0.message.includes("Request failed with status code 401")&&e(N("wrong username or password",5)),t.t0.message.includes("Request failed with status code 500")&&e(N("could not connect to the server",8));case 17:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{window.localStorage.clear(),window.location.reload()}catch(t){console.log("the logout exception is...",t)}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"app-container"},o.a.createElement(xe,null),null!==t?o.a.createElement(ve,{user:t,handleLogout:x}):null,null===t?o.a.createElement(ae,{handleLogin:g,username:c,setUsername:u,password:v,setPassword:b}):o.a.createElement(m.c,null,o.a.createElement(m.a,{path:"/users/:id"},o.a.createElement(Ue,null)),o.a.createElement(m.a,{path:"/users"},o.a.createElement(re,null)),o.a.createElement(m.a,{path:"/blogs/:id"},o.a.createElement(Te,null)),o.a.createElement(m.a,{path:"/"},o.a.createElement(Z,null,o.a.createElement(J,null)))))}),We=n(17),qe=n(45),De=n(46),Me=Object(We.combineReducers)({blogs:k,notification:S,user:ze,users:Fe}),Pe=Object(We.createStore)(Me,Object(qe.composeWithDevTools)(Object(We.applyMiddleware)(De.a)));n(76);u.a.render(o.a.createElement(l.a,null,o.a.createElement(i.a,{store:Pe},o.a.createElement(Ve,null))),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.a9523165.chunk.js.map